:root{
  --velvet1:#020805;
  --velvet2:#041914;
  --velvet3:#020f15;

  --emerald1:#16a085;
  --emerald2:#0b5b43;
  --emerald3:#7fffd4;

  --accent-purple:#422b53;
  --accent-smoke:#050608;

  --gold1:#f8d777;
  --gold2:#d8a62a;
  --gold3:#fff4b8;

  --paper:#fdf8eb;
  --ink:#0b0b0b;
  --edge:#e4d6b9;
}

html, body{ height:100%; }
body{
  margin:0;
  font-family:"IM Fell English", Georgia, ui-serif;
  color:var(--ink);
  overflow:hidden;
  user-select:none;
  -webkit-tap-highlight-color:transparent;
}

/* Emerald velvet background */
.stage{
  position:relative;
  width:100vw;
  height:100vh;
  display:grid;
  place-items:center;
}
.cloth{
  position:absolute; inset:0;
  background:
    radial-gradient(1200px 800px at 20% 20%, #0a3a2f 0, transparent 60%),
    radial-gradient(1200px 900px at 80% 15%, #1e7a5d 0, transparent 60%),
    radial-gradient(1400px 900px at 50% 100%, #12081d 0, transparent 70%),
    linear-gradient(180deg, var(--velvet1), var(--velvet3));
  filter:saturate(130%) contrast(110%) brightness(95%);
  z-index:0;
}

/* Fireworks behind everything */
canvas#fireworks{
  position:fixed;
  inset:0;
  z-index:1;
  pointer-events:none;
}

/* 3D book */
.book3d{
  position:relative;
  width:min(980px,92vw);
  height:min(680px,84vh);
  perspective:2400px;
  z-index:2;
}
.board{
  position:absolute;
  inset:0;
  transform-style:preserve-3d;
  border-radius:14px;
  box-shadow:0 18px 60px rgba(0,0,0,.55);
}
.board.back{
  background:
    radial-gradient(circle at 15% 10%, #166b4e 0, transparent 55%),
    radial-gradient(circle at 85% 90%, #2c2040 0, transparent 55%),
    linear-gradient(135deg,#06130f 0,#030607 55%,#050910 100%);
  border:2px solid #00000080;
}

/* Front cover: spellbook of emerald Oz */
.board.cover{
  transform-origin:left center;
  background:
    radial-gradient(circle at 15% 15%, rgba(127,255,212,.35) 0, transparent 50%),
    radial-gradient(circle at 85% 85%, rgba(248,215,119,.2) 0, transparent 50%),
    linear-gradient(145deg,#0b3126 0%,#0a241b 40%,#010504 100%);
  border:2px solid #000000b0;
  box-shadow:
    0 26px 80px rgba(0,0,0,.85),
    0 0 32px rgba(0, 255, 170, .35),
    inset 0 0 0 2px #00000070,
    inset 0 0 0 8px rgba(255,255,255,.04);
}

/* Cover art */
.cover-art{
  position:absolute;
  inset:24px 26px;
  border-radius:12px;
  background:
    radial-gradient(circle at 50% 0%, rgba(127,255,212,.16) 0, transparent 60%),
    linear-gradient(145deg,rgba(0,0,0,.55),rgba(0,0,0,.95));
  display:grid;
  place-items:center;
  padding:16px;
  box-shadow:
    0 0 24px rgba(0,255,170,.35),
    inset 0 0 0 1px rgba(127,255,212,.35);
}
.frame{
  position:relative;
  width:100%;
  height:100%;
  border-radius:12px;
  background:
    radial-gradient(160% 140% at 50% 0%,#14291f 0,#07120f 55%,#010304 100%);
  box-shadow:
    inset 0 0 0 2px rgba(127,255,212,.3),
    inset 0 0 0 7px rgba(0,0,0,.8);
  display:grid;
  place-items:center;
  text-align:center;
  padding:24px;
}
.title{
  font-family:"Cinzel", serif;
  font-weight:800;
  letter-spacing:.14em;
  text-transform:uppercase;
  font-size:clamp(28px,4.8vw,52px);
  margin:0;
  color:#dffef3;
  text-shadow:
    0 0 10px rgba(0,255,170,.55),
    0 0 22px rgba(0,0,0,.9);
}
.subtitle{
  font-family:"Cinzel", serif;
  font-weight:700;
  letter-spacing:.18em;
  margin:.9em 0 0;
  text-align:center;
  color:#a9ffdf;
  font-size:clamp(13px,2vw,18px);
  text-transform:uppercase;
  text-shadow:0 0 8px rgba(0,0,0,.8);
}
.byline{
  text-align:center;
  margin:1.8em 0 0;
  color:#e0cfa4;
  font-style:italic;
  font-size:clamp(12px,1.6vw,14px);
}

/* Pages container */
.wrap{
  position:absolute;
  inset:18px 22px;
  transform-style:preserve-3d;
  z-index:2;
}
.book{
  position:relative;
  width:100%;
  height:100%;
  transform-style:preserve-3d;
  cursor:pointer;
}

/* Page base */
.page{
  --stack: 0;
  position:absolute;
  inset:0;
  background:var(--paper);
  border-radius:10px;
  box-shadow:
    0 16px 32px rgba(0,0,0,.42),
    0 0 0 1px #00000040 inset,
    3px 0 0 0 var(--edge) inset;
  transform-origin:left center;
  transform-style:preserve-3d;
  padding:clamp(18px,3vw,28px);
  display:grid;
  grid-template-rows:auto 1fr auto;
  gap:14px;
  backface-visibility:hidden;
  transition: transform .9s cubic-bezier(.2,.7,.1,1), z-index .9s;
}

/* Paper texture with faint green tone */
.page::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  pointer-events:none;
  background:
    radial-gradient(200% 120% at -10% 50%, rgba(0,0,0,.08), transparent 35%),
    radial-gradient(220% 140% at 110% 50%, rgba(0,0,0,.06), transparent 35%),
    linear-gradient(120deg, rgba(0,120,60,.05), transparent 40%),
    repeating-linear-gradient(0deg, #ffffff00 0 22px, #00000005 22px 23px);
  mix-blend-mode:multiply;
  opacity:.7;
}

/* Dynamic curl surface along the outer edge */
.page::after{
  content:"";
  position:absolute;
  right:-2px; top:0; bottom:0;
  width:56px;
  border-radius:0 10px 10px 0;
  background:
    radial-gradient(120% 100% at 0% 50%, rgba(255,255,255,.95) 0 45%, rgba(255,255,255,0) 60%),
    linear-gradient(90deg, rgba(0,0,0,.40), rgba(0,0,0,0) 60%);
  opacity:0;
  transform-origin:right center;
  transform: rotateY(0) translateZ(0);
  filter: blur(.2px);
  transition: opacity .35s ease, transform .85s cubic-bezier(.2,.7,.1,1);
}

/* States */
.page.current{ z-index:30; }
.page.right  { transform: rotateY(0deg);      z-index:20; }
.page.left   {
  transform:
    rotateY(-130deg)
    translateX(calc(var(--stack)*-2px))
    translateZ(calc(var(--stack)*-0.6px));
  z-index:10;
}
.page.left::after{
  opacity:1;
  transform: rotateY(30deg) translateZ(1px) scaleX(-1);
}
.page.curl-forward::after{
  opacity:1;
  transform: rotateY(-30deg) translateZ(1px);
}
.page.curl-back::after{
  opacity:1;
  transform: rotateY(30deg) translateZ(1px) scaleX(-1);
}

/* Typography */
h1,h2{ margin:0; line-height:1.2; }
h1{
  font-size:clamp(26px,4vw,38px);
  color:#103529;
}
h2{
  font-size:clamp(18px,2.6vw,24px);
  color:#3b214e;
  opacity:.9;
}
p{
  font-size:clamp(15px,1.8vw,18px);
  color:#1f1f1f;
  line-height:1.65;
  margin:0;
}
.meta{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  color:#30463f;
  font-size:12px;
  opacity:.85;
}
.tag{
  text-transform:uppercase;
  letter-spacing:.12em;
}
/* Image inside page */
.page-image{
  width:100%;
  max-width:340px;        /* was too big before */
  max-height:240px;       /* prevents it from taking full page */
  object-fit:cover;       /* crops instead of stretching */
  border-radius:12px;
  display:block;
  margin:10px auto 20px;
  box-shadow:
    0 6px 20px rgba(0,0,0,0.28),
    0 0 0 2px rgba(255,255,255,0.12) inset;
}


/* Story “panel” */
.art{
  position:relative;
  border-radius:10px;
  background:
    radial-gradient(circle at 12% 0%, rgba(0,120,60,.10) 0, transparent 45%),
    radial-gradient(circle at 100% 100%, rgba(80,40,120,.18) 0, transparent 55%),
    linear-gradient(145deg,#fffdf4,#f3e7c6);
  border:1px solid rgba(0,0,0,.08);
  padding:18px;
  overflow:hidden;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.4),
    0 0 22px rgba(0,0,0,.08);
}

/* Stars – witchy green glow */
.stars{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.star{
  position:absolute;
  width:8px;
  height:8px;
  background:
    radial-gradient(circle,#f8fff6 0 40%,#b9ffd8 40% 70%,#fff0 75%);
  border-radius:50%;
  opacity:.95;
  filter:
    drop-shadow(0 0 6px #9effc9)
    drop-shadow(0 0 10px rgba(10,255,140,.7));
  animation:float 9s linear infinite;
}
@keyframes float{
  from{ transform:translateY(110%); opacity:0; }
  10%{ opacity:1; }
  to{ transform:translateY(-20%); opacity:0; }
}

/* Cover open/close */
.book3d.closed  #cover{ transform: rotateY(0deg); }
.book3d.open    #cover{
  transform: rotateY(-178deg);
  transition:transform 1.1s cubic-bezier(.2,.7,.1,1);
}
.book3d.closing #cover{
  transform: rotateY(0deg);
  transition:transform 1.1s cubic-bezier(.2,.7,.1,1);
}
#cover{
  transform:rotateY(0deg);
  transition:transform .8s ease;
  transform-style:preserve-3d;
  z-index:3;
}

/* Real Elphaba & Glinda images behind the book */
.bg-characters{
  position:absolute;
  inset:0;
  z-index:1;              /* behind the book (book3d is z=2) */
  pointer-events:none;    /* so clicks still go to the book */
}

.bg-characters img{
  position:absolute;
  max-height:60vh;        /* keep them from getting too huge */
  opacity:0.9;
  filter:drop-shadow(0 0 18px rgba(0,0,0,.9));
  object-fit:contain;
}

/* Elphaba on the left */
.bg-elph{
  left:6%;
  bottom:4%;
}

/* Glinda on the right */
.bg-glinda{
  right:6%;
  bottom:6%;
}

/* Optional: slight breathing animation (very subtle) */
.bg-characters img{
  animation:bgFloat 14s ease-in-out infinite alternate;
}

@keyframes bgFloat{
  0%{
    transform:translateY(0) scale(1);
  }
  50%{
    transform:translateY(-10px) scale(1.01);
  }
  100%{
    transform:translateY(-20px) scale(1.02);
  }
}

/* Wicked Ticket Style */
.art.ticket{
  background:
    linear-gradient(135deg, #0a261f, #03110c 60%, #0e372c 100%);
  border:2px dashed rgba(127,255,212,.35);
  padding:0;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:
    0 0 22px rgba(0,255,170,.25),
    inset 0 0 16px rgba(0,255,150,.25);
}
/* Animated sparkles around the ticket */
.ticket-sparkles{
  position:absolute;
  inset:0;
  pointer-events:none;
}

.sparkle{
  position:absolute;
  width:8px;
  height:8px;
  border-radius:50%;
  background:radial-gradient(circle,#ffffff 0,#a8ffe4 40%,transparent 70%);
  opacity:0;
  filter:drop-shadow(0 0 8px rgba(160,255,230,.8));
  animation:sparkleBlink 3.4s infinite ease-in-out;
}

/* Different positions & delays for a scattered glitter effect */
.ticket-sparkles .sparkle:nth-child(1){ top:12%; left:18%; animation-delay:.0s; }
.ticket-sparkles .sparkle:nth-child(2){ top:8%;  right:14%; animation-delay:.5s; }
.ticket-sparkles .sparkle:nth-child(3){ top:26%; left:6%;  animation-delay:1.1s; }
.ticket-sparkles .sparkle:nth-child(4){ top:30%; right:8%; animation-delay:1.8s; }
.ticket-sparkles .sparkle:nth-child(5){ bottom:18%; left:14%; animation-delay:2.3s; }
.ticket-sparkles .sparkle:nth-child(6){ bottom:10%; right:16%; animation-delay:2.9s; }
.ticket-sparkles .sparkle:nth-child(7){ top:50%; left:24%; animation-delay:1.5s; }
.ticket-sparkles .sparkle:nth-child(8){ top:46%; right:22%; animation-delay:.9s; }
.ticket-sparkles .sparkle:nth-child(9){ bottom:32%; left:32%; animation-delay:2.6s; }
.ticket-sparkles .sparkle:nth-child(10){ bottom:28%; right:30%; animation-delay:1.3s; }
.ticket-sparkles .sparkle:nth-child(11){ top:18%; left:50%; animation-delay:.7s; }
.ticket-sparkles .sparkle:nth-child(12){ bottom:14%; left:52%; animation-delay:2.1s; }

@keyframes sparkleBlink{
  0%, 75%, 100%{
    opacity:0;
    transform:scale(.4);
  }
  18%{
    opacity:1;
    transform:scale(1);
  }
  28%{
    opacity:.2;
    transform:scale(.7);
  }
}

.ticket-inner{
  width:100%;
  height:100%;
  display:flex;
  border-radius:10px;
  overflow:hidden;
  backdrop-filter:blur(3px);
}

.ticket-left, .ticket-right{
  padding:22px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  color:#e7fff6;
}

/* Left side: movie info */
.ticket-left{
  width:65%;
  background:linear-gradient(145deg, rgba(0,40,25,.4), rgba(0,0,0,.6));
}

.ticket-left h3{
  margin:0;
  font-family:"Cinzel", serif;
  font-size:clamp(22px,3vw,32px);
  text-transform:uppercase;
  letter-spacing:.08em;
  color:#a8ffe4;
  text-shadow:0 0 12px rgba(0,255,180,.5);
}

.ticket-sub{
  margin:.6em 0 1.2em;
  color:#c0ffee;
  font-size:clamp(13px,1.6vw,16px);
  opacity:.85;
}

.ticket-details p{
  margin:.26em 0;
  font-size:clamp(14px,1.8vw,18px);
  letter-spacing:.02em;
}
/* Make the ticket details text white */
.ticket-details p,
.ticket-details p strong {
  color:#ffffff !important;
}

/* Right side: QR style badge */
.ticket-right{
  width:35%;
  background:linear-gradient(145deg, rgba(160,255,230,.18), rgba(0,0,0,.6));
  align-items:center;
}

.qr{
  width:90px;
  height:90px;
  background:
    repeating-linear-gradient(45deg,#fff 0 6px,#000 6px 12px);
  filter:contrast(140%) brightness(80%);
  margin-bottom:14px;
}

.code{
  font-family:monospace;
  font-size:clamp(12px,1.4vw,14px);
  opacity:.8;
  letter-spacing:.12em;
}

/* Mobile */
@media (max-width:640px){
  .book3d{
    width:94vw;
    height:80vh;
  }
}
